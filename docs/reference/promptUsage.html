<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Generate usage text for functions and methods — promptUsage • Rdpack</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Generate usage text for functions and methods — promptUsage" />
<meta property="og:description" content="
  
Generates usage text for a function, S3 method or S4 method.  The text
  is suitably formatted for inclusion in the usage section of Rd
  documentation." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Rdpack</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/GeoBosh/Rdpack/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generate usage text for functions and methods</h1>
    
    <div class="hidden name"><code>promptUsage.Rd</code></div>
    </div>

    <div class="ref-description">
    
  
<p>Generates usage text for a function, S3 method or S4 method.  The text
  is suitably formatted for inclusion in the usage section of Rd
  documentation.</p>
    </div>

    <pre class="usage"><span class='fu'>get_usage</span>(<span class='no'>object</span>, <span class='kw'>name</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>force.function</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>...</span>,
          <span class='kw'>S3class</span> <span class='kw'>=</span> <span class='st'>""</span>, <span class='kw'>S4sig</span> <span class='kw'>=</span> <span class='st'>""</span>, <span class='kw'>infix</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>fu</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
          <span class='kw'>out.format</span> <span class='kw'>=</span> <span class='st'>"text"</span>)

<span class='fu'>promptUsage</span>(<span class='no'>...</span>, <span class='no'>usage</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>a function object or a character name of one, can be
    anonymous function.</p></td>
    </tr>
    <tr>
      <th>name</th>
      <td><p>the name of a function, a string.</p></td>
    </tr>
    <tr>
      <th>force.function</th>
      <td><p>enforce looking for a function.</p></td>
    </tr>
    <tr>
      <th>S3class</th>
      <td><p>the S3 class of the function, a character vector.</p></td>
    </tr>
    <tr>
      <th>out.format</th>
      <td><p>if "<code>text</code>", return the result as a character
    vector.</p></td>
    </tr>
    <tr>
      <th>S4sig</th>
      <td><p>(the signature of an S4 method, as used in Rd macro
    <code>\S4method</code>).</p></td>
    </tr>
    <tr>
      <th>infix</th>
      <td><p>if TRUE the function is an infix operator.</p></td>
    </tr>
    <tr>
      <th>fu</th>
      <td><p>if TRUE the object is a function, otherwise it is something
    else (e.g. a variable or a constant like <code>pi</code> and <code>Inf</code>).</p></td>
    </tr>
    <tr>
      <th>usage</th>
      <td><p>an usage object, see Details.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>for <code>promptUsage</code>, arguments to be passed on to
    <code>get_usage</code>; for <code>get_usage</code>, currently not used.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    

<p><code>get_usage()</code> takes a function object, or the name of one, and
  creates text suitable for inclusion in the usage section of Rd
  documentation.  The usage is generated from the function object.  When
  in interactive <span style="R">R</span> session, use <code><a href='https://rdrr.io/r/base/cat.html'>cat()</a></code> to print the result for
  copying and pasting into Rd documentation or saving to a file
  (otherwise, if the usage text contains backslashes, they may appear
  duplicated).  Long text is wrapped on two or more lines. For example,
  <pre><span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span>(<span class='fu'>get_usage</span>(<span class='no'>lm</span>))
<span class='co'>##: lm(formula, data, subset, weights, na.action, method = "qr", </span>
<span class='co'>##:    model = TRUE, x = FALSE, y = FALSE, qr = TRUE, singular.ok = TRUE, </span>
<span class='co'>##:    contrasts = NULL, offset, \dots)</span></pre>
  Argument <code>"name"</code> can be used to specify a print name for the function.
  This is most often needed for S3 methods. Compare
  <pre><span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span>(<span class='fu'>get_usage</span>(<span class='no'>summary.lm</span>))
<span class='co'>##: summary.lm(object, correlation = FALSE, symbolic.cor = FALSE, \dots)</span></pre>
  and
  <pre><span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span>(<span class='fu'>get_usage</span>(<span class='no'>summary.lm</span>, <span class='kw'>name</span> <span class='kw'>=</span> <span class='st'>"summary"</span>))
<span class='co'>##: summary(object, correlation = FALSE, symbolic.cor = FALSE, \dots)</span></pre>
  The call is just <code><a href='https://rdrr.io/r/base/summary.html'>summary()</a></code> in the latter. This fairly reflects
  the fact that S3 methods are normally called via the generic, but
  adding some explanatory text around the command is usually a good
  idea. For programmatically generated usage sections in help pages,
  argument <code>S3class</code> can be used to get the standard Rd markup for
  S3 methods.
  <pre><span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span>(<span class='fu'>get_usage</span>(<span class='no'>summary.lm</span>, <span class='st'>"summary"</span>, <span class='kw'>S3class</span> <span class='kw'>=</span> <span class='st'>"lm"</span>))
<span class='co'>##: \method{summary}{lm}(object, correlation = FALSE, symbolic.cor = FALSE, \dots)</span></pre>
  (Note that <code>\method</code> can only be used in Usage sections.)</p>  
<p>When <code>object</code> is an anonymous function, argument <code>name</code> is compulsory.
  For example,
  <!-- % this code  prints ugly: \printExample{cat( get_usage(function(x = 3, y="a"){}, "f") )}  -->
  <!-- %  so do it manually in two steps: -->
  <code><a href='https://rdrr.io/r/base/cat.html'>cat( get_usage(function(x = 3, y = "a"){}, "f") )</a></code></p>
<p><!-- % TODO: this is commented out from the pkgdown site, since pkgdown() doesn't handle -->
<!-- %  results=verbatim yet. -->
<!-- %\Sexpr[stage=build,results=verbatim]{cat("##: ", get_usage(function(x = 3, y = "a"){}, "f"), "\n" )} --></p>
<p><code>get_usage()</code> can also be used to insert dynamically signatures
  of functions located in other objects, such as environments and lists,
  see the examples.</p>
<p>If a function is used as an infix operator, set <code>infix = TRUE</code>.
  <pre><span class='fu'>get_usage</span>(<span class='st'>"+"</span>, <span class='kw'>infix</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='co'>##: [1] "e1 + e2"</span>
<span class='fu'>get_usage</span>(<span class='st'>"%in%"</span>, <span class='kw'>infix</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='co'>##: [1] "x %in% table"</span></pre>
  The name of the operator may be in a variable:
  <pre><span class='no'>op</span> <span class='kw'>&amp;</span><span class='no'>lt</span>;- <span class='st'>"+"</span>
<span class='fu'>get_usage</span>(<span class='no'>op</span>, <span class='kw'>infix</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='co'>##: [1] "e1 + e2"</span></pre></p>  
<p>Backticks are ok, as well,
  <pre><span class='fu'>get_usage</span>(<span class='no'>`+`</span>, <span class='kw'>infix</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='co'>##: [1] "e1 + e2"</span></pre>
  But if a backticked operator is in a variable, surprise springs: 
  <pre><span class='no'>op</span> <span class='kw'>&amp;</span><span class='no'>lt</span>;- <span class='no'>`+`</span>
<span class='fu'>get_usage</span>(<span class='no'>op</span>, <span class='kw'>infix</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='co'>##: [1] "e1 op e2"</span></pre>
  In this case, don't use backticks  or, if you must, evaluate the argument:
  <pre><span class='no'>op</span> <span class='kw'>&amp;</span><span class='no'>lt</span>;- <span class='no'>`+`</span>
<span class='fu'>get_usage</span>(<span class='fu'><a href='https://rdrr.io/r/base/eval.html'>eval</a></span>(<span class='no'>op</span>), <span class='kw'>name</span> <span class='kw'>=</span> <span class='st'>"+"</span>, <span class='kw'>infix</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='co'>##: [1] "e1 + e2"</span></pre></p>

<p><!-- % \Sexpr[stage=build,results=hide]{wrap_percent &lt;- function(x) paste0("\%", x, "\%")} -->
  <!-- % \printExample{op &lt;- wrap_percent("in"); get_usage(op,  infix = TRUE)} -->
  <!-- % \printExample{op &lt;- as.name(wrap_percent("in")); get_usage(eval(op), name = "in", infix = TRUE)} -->
  <!-- % \printExample{op &lt;- as.name(wrap_percent("in")); get_usage(eval(op), name = wrap_percent("in"), infix = TRUE)} -->
  <!-- % \printExample{op &lt;- as.name(wrap_percent("in")); get_usage(`\\\%in\\\%`, name = wrap_percent("in"), infix = TRUE)} --></p>
    
<p><!-- % \strong{Sexpr:} -->
  <!-- % \Sexpr[stage=build,results=verbatim]{op &lt;- as.name(wrap_percent("in")); get_usage(eval(op), name = wrap_percent("in"), infix = TRUE)} -->
  <!-- % \Sexpr[stage=build,results=verbatim]{op} -->
  <!-- % \Sexpr[stage=build,results=verbatim]{cat(wrap_percent("in"), "\n")} -->
  <!-- % \Sexpr[stage=build,results=verbatim]{e &lt;- environment(); ls(e)} --></p>
  
<p><code>promptUsage()</code> is mostly for internal use. It is like
  <code>get_usage()</code> with an additional argument, <code>usage</code>, used to
  pass a specially parsed argument list of class <code>"f_usage"</code>,
  produced by other functions in <span class="pkg">Rdpack</span>. In particular it could
  have been generated by a previous call to <code>get_usage()</code>.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a character string or an object of S3 class "<code>f_usage</code>",
  see <code><a href='parse_pairlist.html'>pairlist2f_usage1</a></code> for its format.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>For an S3 or S4 generic, use the name of the function, not the object,
  see the examples.</p>
<p>These functions are for usage descriptions as they appear in the "usage"
  section of Rd files. Descriptions of S4 methods for "Methods" sections
  are dealt with by other functions.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='parse_pairlist.html'>parse_pairlist</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>u</span> <span class='kw'>&lt;-</span> <span class='fu'>get_usage</span>(<span class='no'>lm</span>)    <span class='co'># a long usage text</span>
<span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span>(<span class='no'>u</span>)</div><div class='output co'>#&gt; lm(formula, data, subset, weights, na.action, method = "qr", 
#&gt;    model = TRUE, x = FALSE, y = FALSE, qr = TRUE, singular.ok = TRUE, 
#&gt;    contrasts = NULL, offset, \dots)</div><div class='input'>
<span class='co'># if there are additional arguments in S3 methods,</span>
<span class='co'># use names of the functions, not the objects, e.g.</span>
<span class='fu'>get_usage</span>(<span class='st'>"droplevels"</span>, <span class='kw'>S3class</span> <span class='kw'>=</span> <span class='st'>"data.frame"</span>)</div><div class='output co'>#&gt;                                                            droplevels 
#&gt; "\\method{droplevels}{data.frame}(x, except = NULL, exclude, \\dots)" </div><div class='input'><span class='fu'>get_usage</span>(<span class='kw'>name</span> <span class='kw'>=</span> <span class='st'>"droplevels"</span>, <span class='kw'>S3class</span> <span class='kw'>=</span> <span class='st'>"data.frame"</span>)</div><div class='output co'>#&gt;                                                            droplevels 
#&gt; "\\method{droplevels}{data.frame}(x, except = NULL, exclude, \\dots)" </div><div class='input'><span class='co'># (both give "\method{droplevels}{data.frame}(x, except = NULL, \dots)")</span>

<span class='co'># but this gives the args of the generic:  "\method{droplevels}{data.frame}(x, \dots)"</span>
<span class='fu'>get_usage</span>(<span class='no'>droplevels</span>, <span class='kw'>S3class</span> <span class='kw'>=</span> <span class='st'>"data.frame"</span>)</div><div class='output co'>#&gt;                                    droplevels 
#&gt; "\\method{droplevels}{data.frame}(x, \\dots)" </div><div class='input'>
<span class='co'>## a list containing some functions</span>
<span class='no'>summaries</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>xbar</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>) <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span>(<span class='no'>x</span>), <span class='kw'>rho</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>, <span class='no'>y</span>) <span class='fu'><a href='https://rdrr.io/r/stats/cor.html'>cor</a></span>(<span class='no'>x</span>,<span class='no'>y</span>))
<span class='fu'>get_usage</span>(<span class='no'>summaries</span>$<span class='no'>xbar</span>, <span class='kw'>name</span> <span class='kw'>=</span> <span class='st'>"xbar"</span>)</div><div class='output co'>#&gt;      xbar 
#&gt; "xbar(x)" </div><div class='input'><span class='fu'>get_usage</span>(<span class='no'>summaries</span>$<span class='no'>rho</span>, <span class='kw'>name</span> <span class='kw'>=</span> <span class='st'>"rho"</span>)</div><div class='output co'>#&gt;         rho 
#&gt; "rho(x, y)" </div><div class='input'>
<span class='co'>## functions in an environment</span>
<span class='no'>esummaries</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list2env.html'>list2env</a></span>(<span class='no'>summaries</span>)
<span class='fu'>get_usage</span>(<span class='no'>esummaries</span>$<span class='no'>xbar</span>, <span class='kw'>name</span> <span class='kw'>=</span> <span class='st'>"xbar"</span>)</div><div class='output co'>#&gt;      xbar 
#&gt; "xbar(x)" </div><div class='input'><span class='fu'>get_usage</span>(<span class='no'>esummaries</span>$<span class='no'>rho</span>, <span class='kw'>name</span> <span class='kw'>=</span> <span class='st'>"rho"</span>)</div><div class='output co'>#&gt;         rho 
#&gt; "rho(x, y)" </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Georgi N. Boshnakov.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


