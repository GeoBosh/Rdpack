<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Apply a function over an Rd object — Rdapply • Rdpack</title><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Apply a function over an Rd object — Rdapply"><meta name="description" content="Apply a function recursively over an Rd object, similarly
  to rapply but keeping attributes."><meta property="og:description" content="Apply a function recursively over an Rd object, similarly
  to rapply but keeping attributes."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">Rdpack</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.6.5.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/GeoBosh/Rdpack/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Apply a function over an Rd object</h1>

      <div class="d-none name"><code>Rdapply.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Apply a function recursively over an Rd object, similarly
  to rapply but keeping attributes.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">Rdapply</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">Rdtagapply</span><span class="op">(</span><span class="va">object</span>, <span class="va">FUN</span>, <span class="va">rdtag</span>, classes <span class="op">=</span> <span class="st">"character"</span>, how <span class="op">=</span> <span class="st">"replace"</span>,</span>
<span>           <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">rattr</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <p></p>
<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>the Rd object on which to apply a function.</p></dd>

  <dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>the Rd object on which to apply a function.</p></dd>

  <dt id="arg-fun">FUN<a class="anchor" aria-label="anchor" href="#arg-fun"></a></dt>
<dd><p>The function to apply, see details</p></dd>

  <dt id="arg-rdtag">rdtag<a class="anchor" aria-label="anchor" href="#arg-rdtag"></a></dt>
<dd><p>apply FUN only to elements whose <code>Rd_tag</code> attribute
    is <code>rdtag</code>.</p></dd>

  <dt id="arg-y">y<a class="anchor" aria-label="anchor" href="#arg-y"></a></dt>
<dd><p>an Rd object with the same structure as <code>x</code>, see `Details'.</p></dd>

  <dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>arguments to pass to <code>rapply</code>, see `Details'.</p></dd>

  <dt id="arg-classes">classes<a class="anchor" aria-label="anchor" href="#arg-classes"></a></dt>
<dd><p>a character vector, passed on to <code><a href="https://rdrr.io/r/base/rapply.html" class="external-link">rapply</a></code>,
    see `Details'.</p></dd>

  <dt id="arg-how">how<a class="anchor" aria-label="anchor" href="#arg-how"></a></dt>
<dd><p>a character string, passed on to <code><a href="https://rdrr.io/r/base/rapply.html" class="external-link">rapply</a></code>,
    see `Details'.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>Rdapply</code> works like <code>rapply</code> but preserves the attributes
  of <code>x</code> and (recursively) any sublists of it.  <code>Rdapply</code>
  first calls <code>rapply</code>, passing all arguments to it. Then it
  restores recursively the attributes by calling <code>rattr</code>.</p>
<p>Note that the object returned by <code>rapply</code> is assumed to have
  identical structure to the original object. This means that argument
  <code>how</code> of <code>rapply</code> must not be "unlist" and normally will be
  "replace".  <code>Rdtagapply</code> gives sensible default values for
  <code>classes</code> and <code>how</code>.  See the documentation of
  <code><a href="https://rdrr.io/r/base/rapply.html" class="external-link">rapply</a></code> for details and the possible choices for
  <code>classes</code>, <code>how</code> or other arguments passed to it via
  <code>"\dots"</code>.</p>
<p><code>Rdtagapply</code> is a convenience variant of <code>Rdapply</code> for the
  common task of modifying or examining only elements with a given
  <code>Rd_tag</code> attribute. Since the Rd equation macros <code>\eqn</code> and
  <code>\deqn</code> are assigned Rd tag "VERB" but are processed differently
  from other "VERB" pieces,  pseudo-tags
  "mathVERB" and "nonmathVERB" are provided, such that "mathVERB" is for
  actions on the first argument of the mathematical macros <code>\eqn</code> and
  <code>\deqn</code>, while "nonmathVERB" is for actions on "VERB" macros in
  all other contexts. There is also a pseudo-tag "nonmath" for anything
  that is not math.</p>
<p><code>rattr</code> is an auxilliary function which takes two Rd objects
  (with identical structure) and recursively examines them. It makes the
  attributes of any lists in the first argument identical to the
  corresponding attributes in the second.</p>
    </div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>


<p>For <code>Rdapply</code> and <code>Rdtagapply</code>, an Rd object with some of
  its leaves replaced as specified above.</p>
<p>For <code>rattr</code>, the object <code>x</code> with attributes of any list
  elements of it set to the corresponding attributes of <code>y</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Georgi N. Boshnakov</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>todo: may be it is better to rename the argument FUN of <code>Rdtagapply</code> to
  <code>f</code>, which is its name in <code>rapply</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/r/base/rapply.html" class="external-link">rapply</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># create an Rd object for the sake of example</span></span></span>
<span class="r-in"><span><span class="va">u1</span> <span class="op">&lt;-</span> <span class="fu"><a href="list_Rd.html">list_Rd</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Dummyname"</span>, alias <span class="op">=</span> <span class="st">"dummyfun"</span>,</span></span>
<span class="r-in"><span>              title <span class="op">=</span> <span class="st">"Dummy title"</span>, description <span class="op">=</span> <span class="st">"Dummy description"</span>,</span></span>
<span class="r-in"><span>              usage <span class="op">=</span> <span class="st">"dummyfun(x)"</span>,</span></span>
<span class="r-in"><span>              value <span class="op">=</span> <span class="st">"numeric vector"</span>,</span></span>
<span class="r-in"><span>              author <span class="op">=</span> <span class="st">"A. Author"</span>,</span></span>
<span class="r-in"><span>              examples <span class="op">=</span> <span class="st">"\na &lt;- matrix(1:6,nrow=2)\na %*% t(a)\nt(a) %*% a"</span>,</span></span>
<span class="r-in"><span>              Rd_class<span class="op">=</span><span class="cn">TRUE</span> <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># correct R code for examples but wrong for saving in Rd files</span></span></span>
<span class="r-in"><span><span class="fu"><a href="Rdo_show.html">Rdo_show</a></span><span class="op">(</span><span class="va">u1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># escape percents everywhere except in comments</span></span></span>
<span class="r-in"><span><span class="co">#  (actually, .anypercent escapes only unescaped percents)</span></span></span>
<span class="r-in"><span><span class="va">rdo</span> <span class="op">&lt;-</span> <span class="fu">Rdapply</span><span class="op">(</span><span class="va">u1</span>, <span class="fu">Rdpack</span><span class="fu">:::</span><span class="va"><a href="zzbsdup.html">.anypercent</a></span>, classes <span class="op">=</span> <span class="st">"character"</span>, how <span class="op">=</span> <span class="st">"replace"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># syntactically wrong R code for examples but ok for saving in Rd files</span></span></span>
<span class="r-in"><span><span class="fu"><a href="Rdo_show.html">Rdo_show</a></span><span class="op">(</span><span class="va">rdo</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Rdo2Rdf does this by default for examples and other R code,</span></span></span>
<span class="r-in"><span><span class="co">#   so code can be kept syntactically correct while processing.</span></span></span>
<span class="r-in"><span><span class="co">#   (reprompt() takes care of this too as it uses Rdo2Rdf for saving)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="st">"u1"</span>, fileext<span class="op">=</span><span class="st">"Rd"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="Rdo2Rdf.html">Rdo2Rdf</a></span><span class="op">(</span><span class="va">u1</span>, file <span class="op">=</span> <span class="va">fn</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	The Rd content was written to file  /tmp/Rtmpwv08SD/u11c01393647aaRd </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># the saved file contains escaped percents but they disappear in parsing:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/file.show.html" class="external-link">file.show</a></span><span class="op">(</span><span class="va">fn</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="Rdo_show.html">Rdo_show</a></span><span class="op">(</span><span class="fu">tools</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/tools/parse_Rd.html" class="external-link">parse_Rd</a></span><span class="op">(</span><span class="va">fn</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># if you think that sections should start on new lines,</span></span></span>
<span class="r-in"><span><span class="co"># the following makes the file a little more human-friendly</span></span></span>
<span class="r-in"><span><span class="co">#   (by inserting new lines).</span></span></span>
<span class="r-in"><span><span class="va">u2</span> <span class="op">&lt;-</span> <span class="fu">Rdpack</span><span class="fu">:::</span><span class="fu">.Rd_tidy</span><span class="op">(</span><span class="va">u1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="Rdo2Rdf.html">Rdo2Rdf</a></span><span class="op">(</span><span class="va">u2</span>, file <span class="op">=</span> <span class="va">fn</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	The Rd content was written to file  /tmp/Rtmpwv08SD/u11c01393647aaRd </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/file.show.html" class="external-link">file.show</a></span><span class="op">(</span><span class="va">fn</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="va">fn</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Georgi N. Boshnakov.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

