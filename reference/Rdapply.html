<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Apply a function over an Rd object — Rdapply • Rdpack</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Apply a function over an Rd object — Rdapply" />
<meta property="og:description" content="Apply a function recursively over an Rd object, similarly
  to rapply but keeping attributes." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Rdpack</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/GeoBosh/Rdpack/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Apply a function over an Rd object</h1>
    
    <div class="hidden name"><code>Rdapply.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Apply a function recursively over an Rd object, similarly
  to rapply but keeping attributes.</p>
    </div>

    <pre class="usage"><span class='fu'>Rdapply</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='fu'>Rdtagapply</span><span class='op'>(</span><span class='va'>object</span>, <span class='va'>FUN</span>, <span class='va'>rdtag</span>, classes <span class='op'>=</span> <span class='st'>"character"</span>, how <span class='op'>=</span> <span class='st'>"replace"</span>,
           <span class='va'>...</span><span class='op'>)</span>

<span class='fu'>rattr</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>y</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>the Rd object on which to apply a function.</p></td>
    </tr>
    <tr>
      <th>object</th>
      <td><p>the Rd object on which to apply a function.</p></td>
    </tr>
    <tr>
      <th>FUN</th>
      <td><p>The function to apply, see details</p></td>
    </tr>
    <tr>
      <th>rdtag</th>
      <td><p>apply FUN only to elements whose <code>Rd_tag</code> attribute
    is <code>rdtag</code>.</p></td>
    </tr>
    <tr>
      <th>y</th>
      <td><p>an Rd object with the same structure as <code>x</code>, see `Details'.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>arguments to pass to <code>rapply</code>, see `Details'.</p></td>
    </tr>
    <tr>
      <th>classes</th>
      <td><p>a character vector, passed on to <code><a href='https://rdrr.io/r/base/rapply.html'>rapply</a></code>,
    see `Details'.</p></td>
    </tr>
    <tr>
      <th>how</th>
      <td><p>a character string, passed on to <code><a href='https://rdrr.io/r/base/rapply.html'>rapply</a></code>,
    see `Details'.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>Rdapply</code> works like <code>rapply</code> but preserves the attributes
  of <code>x</code> and (recursively) any sublists of it.  <code>Rdapply</code>
  first calls <code>rapply</code>, passing all arguments to it. Then it
  restores recursively the attributes by calling <code>rattr</code>.</p>
<p>Note that the object returned by <code>rapply</code> is assumed to have
  identical structure to the original object. This means that argument
  <code>how</code> of <code>rapply</code> must not be "unlist" and normally will be
  "replace".  <code>Rdtagapply</code> gives sensible default values for
  <code>classes</code> and <code>how</code>.  See the documentation of
  <code><a href='https://rdrr.io/r/base/rapply.html'>rapply</a></code> for details and the possible choices for
  <code>classes</code>, <code>how</code> or other arguments passed to it via
  <code>"\dots"</code>.</p>
<p><code>Rdtagapply</code> is a convenience variant of <code>Rdapply</code> for the
  common task of modifying or examining only elements with a given
  <code>Rd_tag</code> attribute. Since the Rd equation macros <code>\eqn</code> and
  <code>\deqn</code> are assigned Rd tag "VERB" but are processed differently
  from other "VERB" pieces,  pseudo-tags
  "mathVERB" and "nonmathVERB" are provided, such that "mathVERB" is for
  actions on the first argument of the mathematical macros <code>\eqn</code> and
  <code>\deqn</code>, while "nonmathVERB" is for actions on "VERB" macros in
  all other contexts. There is also a pseudo-tag "nonmath" for anything
  that is not math.</p>
<p><code>rattr</code> is an auxilliary function which takes two Rd objects
  (with identical structure) and recursively examines them. It makes the
  attributes of any lists in the first argument identical to the
  corresponding attributes in the second.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    
  
<p>For <code>Rdapply</code> and <code>Rdtagapply</code>, an Rd object with some of
  its leaves replaced as specified above.</p>
<p>For <code>rattr</code>, the object <code>x</code> with attributes of any list
  elements of it set to the corresponding attributes of <code>y</code>.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Georgi N. Boshnakov</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>todo: may be it is better to rename the argument FUN of <code>Rdtagapply</code> to
  <code>f</code>, which is its name in <code>rapply</code>.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='https://rdrr.io/r/base/rapply.html'>rapply</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># create an Rd object for the sake of example</span>
<span class='va'>u1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='list_Rd.html'>list_Rd</a></span><span class='op'>(</span>name <span class='op'>=</span> <span class='st'>"Dummyname"</span>, alias <span class='op'>=</span> <span class='st'>"dummyfun"</span>,
              title <span class='op'>=</span> <span class='st'>"Dummy title"</span>, description <span class='op'>=</span> <span class='st'>"Dummy description"</span>,
              usage <span class='op'>=</span> <span class='st'>"dummyfun(x)"</span>,
              value <span class='op'>=</span> <span class='st'>"numeric vector"</span>,
              author <span class='op'>=</span> <span class='st'>"A. Author"</span>,
              examples <span class='op'>=</span> <span class='st'>"\na &lt;- matrix(1:6,nrow=2)\na %*% t(a)\nt(a) %*% a"</span>,
              Rd_class<span class='op'>=</span><span class='cn'>TRUE</span> <span class='op'>)</span>

<span class='co'># correct R code for examples but wrong for saving in Rd files</span>
<span class='fu'><a href='Rdo_show.html'>Rdo_show</a></span><span class='op'>(</span><span class='va'>u1</span><span class='op'>)</span>

<span class='co'># escape percents everywhere except in comments</span>
<span class='co'>#  (actually, .anypercent escapes only unescaped percents)</span>
<span class='va'>rdo</span> <span class='op'>&lt;-</span> <span class='fu'>Rdapply</span><span class='op'>(</span><span class='va'>u1</span>, <span class='fu'>Rdpack</span><span class='fu'>:::</span><span class='va'><a href='.bsdup.html'>.anypercent</a></span>, classes <span class='op'>=</span> <span class='st'>"character"</span>, how <span class='op'>=</span> <span class='st'>"replace"</span><span class='op'>)</span>

<span class='co'># syntactically wrong R code for examples but ok for saving in Rd files</span>
<span class='fu'><a href='Rdo_show.html'>Rdo_show</a></span><span class='op'>(</span><span class='va'>rdo</span><span class='op'>)</span>


<span class='co'># Rdo2Rdf does this by default for examples and other R code,</span>
<span class='co'>#   so code can be kept syntactically correct while processing.</span>
<span class='co'>#   (reprompt() takes care of this too as it uses Rdo2Rdf for saving)</span>

<span class='va'>fn</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempfile</a></span><span class='op'>(</span><span class='st'>"u1"</span>, fileext<span class='op'>=</span><span class='st'>"Rd"</span><span class='op'>)</span>
<span class='fu'><a href='Rdo2Rdf.html'>Rdo2Rdf</a></span><span class='op'>(</span><span class='va'>u1</span>, file <span class='op'>=</span> <span class='va'>fn</span><span class='op'>)</span>
</div><div class='output co'>#&gt; 	The Rd content was written to file  /var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//Rtmp19O4cv/u1147b19f95063Rd </div><div class='input'>
<span class='co'># the saved file contains escaped percents but they disappear in parsing:</span>
<span class='fu'><a href='https://rdrr.io/r/base/file.show.html'>file.show</a></span><span class='op'>(</span><span class='va'>fn</span><span class='op'>)</span>
<span class='fu'><a href='Rdo_show.html'>Rdo_show</a></span><span class='op'>(</span><span class='fu'>tools</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/r/tools/parse_Rd.html'>parse_Rd</a></span><span class='op'>(</span><span class='va'>fn</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># if you think that sections should start on new lines,</span>
<span class='co'># the following makes the file a little more human-friendly</span>
<span class='co'>#   (by inserting new lines).</span>
<span class='co'># todo: additional arg. for list_Rd for this?</span>

<span class='va'>u2</span> <span class='op'>&lt;-</span> <span class='fu'>Rdpack</span><span class='fu'>:::</span><span class='fu'>.Rd_tidy</span><span class='op'>(</span><span class='va'>u1</span><span class='op'>)</span>
<span class='fu'><a href='Rdo2Rdf.html'>Rdo2Rdf</a></span><span class='op'>(</span><span class='va'>u2</span>, file <span class='op'>=</span> <span class='va'>fn</span><span class='op'>)</span>
</div><div class='output co'>#&gt; 	The Rd content was written to file  /var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//Rtmp19O4cv/u1147b19f95063Rd </div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/file.show.html'>file.show</a></span><span class='op'>(</span><span class='va'>fn</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/unlink.html'>unlink</a></span><span class='op'>(</span><span class='va'>fn</span><span class='op'>)</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Georgi N. Boshnakov.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


