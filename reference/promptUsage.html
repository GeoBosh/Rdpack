<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Generate usage text for functions and methods — promptUsage • Rdpack</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate usage text for functions and methods — promptUsage"><meta name="description" content="

Generates usage text for a function, S3 method or S4 method.  The text
  is suitably formatted for inclusion in the usage section of Rd
  documentation."><meta property="og:description" content="

Generates usage text for a function, S3 method or S4 method.  The text
  is suitably formatted for inclusion in the usage section of Rd
  documentation."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">Rdpack</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.6.4.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/GeoBosh/Rdpack/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Generate usage text for functions and methods</h1>

      <div class="d-none name"><code>promptUsage.Rd</code></div>
    </div>

    <div class="ref-description section level2">


<p>Generates usage text for a function, S3 method or S4 method.  The text
  is suitably formatted for inclusion in the usage section of Rd
  documentation.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_usage</span><span class="op">(</span><span class="va">object</span>, name <span class="op">=</span> <span class="cn">NULL</span>, force.function <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span>,</span>
<span>          S3class <span class="op">=</span> <span class="st">""</span>, S4sig <span class="op">=</span> <span class="st">""</span>, infix <span class="op">=</span> <span class="cn">FALSE</span>, fu <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>          out.format <span class="op">=</span> <span class="st">"text"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">promptUsage</span><span class="op">(</span><span class="va">...</span>, <span class="va">usage</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <p></p>
<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>a function object or a character name of one, can be
    anonymous function.</p></dd>

  <dt id="arg-name">name<a class="anchor" aria-label="anchor" href="#arg-name"></a></dt>
<dd><p>the name of a function, a string.</p></dd>

  <dt id="arg-force-function">force.function<a class="anchor" aria-label="anchor" href="#arg-force-function"></a></dt>
<dd><p>enforce looking for a function.</p></dd>

  <dt id="arg-s-class">S3class<a class="anchor" aria-label="anchor" href="#arg-s-class"></a></dt>
<dd><p>the S3 class of the function, a character vector.</p></dd>

  <dt id="arg-out-format">out.format<a class="anchor" aria-label="anchor" href="#arg-out-format"></a></dt>
<dd><p>if "<code>text</code>", return the result as a character
    vector.</p></dd>

  <dt id="arg-s-sig">S4sig<a class="anchor" aria-label="anchor" href="#arg-s-sig"></a></dt>
<dd><p>(the signature of an S4 method, as used in Rd macro
    <code>\S4method</code>).</p></dd>

  <dt id="arg-infix">infix<a class="anchor" aria-label="anchor" href="#arg-infix"></a></dt>
<dd><p>if TRUE the function is an infix operator.</p></dd>

  <dt id="arg-fu">fu<a class="anchor" aria-label="anchor" href="#arg-fu"></a></dt>
<dd><p>if TRUE the object is a function, otherwise it is something
    else (e.g. a variable or a constant like <code>pi</code> and <code>Inf</code>).</p></dd>

  <dt id="arg-usage">usage<a class="anchor" aria-label="anchor" href="#arg-usage"></a></dt>
<dd><p>an usage object, see Details.</p></dd>

  <dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>for <code>promptUsage</code>, arguments to be passed on to
    <code>get_usage</code>; for <code>get_usage</code>, currently not used.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>


<p><code>get_usage()</code> takes a function object, or the name of one, and
  creates text suitable for inclusion in the usage section of Rd
  documentation.  The usage is generated from the function object.  When
  in interactive <span style="R">R</span> session, use <code><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat()</a></code> to print the result for
  copying and pasting into Rd documentation or saving to a file
  (otherwise, if the usage text contains backslashes, they may appear
  duplicated).  Long text is wrapped on two or more lines. For example,
  </p><div class="sourceCode"><pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="../reference/promptUsage.html">get_usage</a></span><span class="op">(</span><span class="va">lm</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">##: lm(formula, data, subset, weights, na.action, method = "qr",</span></span>
<span><span class="co">##:    model = TRUE, x = FALSE, y = FALSE, qr = TRUE, singular.ok = TRUE,</span></span>
<span><span class="co">##:    contrasts = NULL, offset, \dots)</span></span></code></pre></div>
  Argument <code>"name"</code> can be used to specify a print name for the function.
  This is most often needed for S3 methods. Compare
  <div class="sourceCode"><pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="../reference/promptUsage.html">get_usage</a></span><span class="op">(</span><span class="va">summary.lm</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">##: summary.lm(object, correlation = FALSE, symbolic.cor = FALSE, \dots)</span></span></code></pre></div>
  and
  <div class="sourceCode"><pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="../reference/promptUsage.html">get_usage</a></span><span class="op">(</span><span class="va">summary.lm</span>, name <span class="op">=</span> <span class="st">"summary"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">##: summary(object, correlation = FALSE, symbolic.cor = FALSE, \dots)</span></span></code></pre></div>
  The call is just <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> in the latter. This fairly reflects
  the fact that S3 methods are normally called via the generic, but
  adding some explanatory text around the command is usually a good
  idea. For programmatically generated usage sections in help pages,
  argument <code>S3class</code> can be used to get the standard Rd markup for
  S3 methods.
  <div class="sourceCode"><pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="../reference/promptUsage.html">get_usage</a></span><span class="op">(</span><span class="va">summary.lm</span>, <span class="st">"summary"</span>, S3class <span class="op">=</span> <span class="st">"lm"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">##: \method{summary}{lm}(object, correlation = FALSE, symbolic.cor = FALSE, \dots)</span></span></code></pre></div>
  (Note that <code>\method</code> can only be used in Usage sections.)
<p>When <code>object</code> is an anonymous function, argument <code>name</code> is compulsory.
  For example,
  <!-- % this code  prints ugly: \printExample{cat( get_usage(function(x = 3, y="a"){}, "f") )}  -->
  <!-- %  so do it manually in two steps: -->
  <code>cat( get_usage(function(x = 3, y = "a"){}, "f") )</code></p>
<p><!-- % TODO: this is commented out from the pkgdown site, since pkgdown() doesn't handle -->
<!-- %  results=verbatim yet. -->
<!-- %\Sexpr[stage=build,results=verbatim]{cat("##: ", get_usage(function(x = 3, y = "a"){}, "f"), "\n" )} --></p>
<p><code>get_usage()</code> can also be used to insert dynamically signatures
  of functions located in other objects, such as environments and lists,
  see the examples.</p>
<p>If a function is used as an infix operator, set <code>infix = TRUE</code>.
  </p><div class="sourceCode"><pre><code><span><span class="fu"><a href="../reference/promptUsage.html">get_usage</a></span><span class="op">(</span><span class="st">"+"</span>, infix <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">##: [1] "e1 + e2"</span></span>
<span><span class="fu"><a href="../reference/promptUsage.html">get_usage</a></span><span class="op">(</span><span class="st">"%in%"</span>, infix <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">##: [1] "x %in% table"</span></span></code></pre></div>
  The name of the operator may be in a variable:
  <div class="sourceCode"><pre><code><span><span class="va">op</span> <span class="op">&lt;-</span> <span class="st">"+"</span></span>
<span><span class="fu"><a href="../reference/promptUsage.html">get_usage</a></span><span class="op">(</span><span class="va">op</span>, infix <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">##: [1] "e1 + e2"</span></span></code></pre></div>
<p>Backticks are ok, as well,
  </p><div class="sourceCode"><pre><code><span><span class="fu"><a href="../reference/promptUsage.html">get_usage</a></span><span class="op">(</span><span class="va">`+`</span>, infix <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">##: [1] "e1 + e2"</span></span></code></pre></div>
  But if a backticked operator is in a variable, surprise springs:
  <div class="sourceCode"><pre><code><span><span class="va">op</span> <span class="op">&lt;-</span> <span class="va">`+`</span></span>
<span><span class="fu"><a href="../reference/promptUsage.html">get_usage</a></span><span class="op">(</span><span class="va">op</span>, infix <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">##: [1] "e1 op e2"</span></span></code></pre></div>
  In this case, don't use backticks  or, if you must, evaluate the argument:
  <div class="sourceCode"><pre><code><span><span class="va">op</span> <span class="op">&lt;-</span> <span class="va">`+`</span></span>
<span><span class="fu"><a href="../reference/promptUsage.html">get_usage</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">eval</a></span><span class="op">(</span><span class="va">op</span><span class="op">)</span>, name <span class="op">=</span> <span class="st">"+"</span>, infix <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">##: [1] "e1 + e2"</span></span></code></pre></div>

<p><!-- % \Sexpr[stage=build,results=hide]{wrap_percent &lt;- function(x) paste0("\%", x, "\%")} -->
  <!-- % \printExample{op &lt;- wrap_percent("in"); get_usage(op,  infix = TRUE)} -->
  <!-- % \printExample{op &lt;- as.name(wrap_percent("in")); get_usage(eval(op), name = "in", infix = TRUE)} -->
  <!-- % \printExample{op &lt;- as.name(wrap_percent("in")); get_usage(eval(op), name = wrap_percent("in"), infix = TRUE)} -->
  <!-- % \printExample{op &lt;- as.name(wrap_percent("in")); get_usage(`\\\%in\\\%`, name = wrap_percent("in"), infix = TRUE)} --></p>

<p><!-- % \strong{Sexpr:} -->
  <!-- % \Sexpr[stage=build,results=verbatim]{op &lt;- as.name(wrap_percent("in")); get_usage(eval(op), name = wrap_percent("in"), infix = TRUE)} -->
  <!-- % \Sexpr[stage=build,results=verbatim]{op} -->
  <!-- % \Sexpr[stage=build,results=verbatim]{cat(wrap_percent("in"), "\n")} -->
  <!-- % \Sexpr[stage=build,results=verbatim]{e &lt;- environment(); ls(e)} --></p>

<p><code>promptUsage()</code> is mostly for internal use. It is like
  <code>get_usage()</code> with an additional argument, <code>usage</code>, used to
  pass a specially parsed argument list of class <code>"f_usage"</code>,
  produced by other functions in <span class="pkg">Rdpack</span>. In particular it could
  have been generated by a previous call to <code>get_usage()</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a character string or an object of S3 class "<code>f_usage</code>",
  see <code><a href="parse_pairlist.html">pairlist2f_usage1</a></code> for its format.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Georgi N. Boshnakov</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>For an S3 or S4 generic, use the name of the function, not the object,
  see the examples.</p>
<p>These functions are for usage descriptions as they appear in the "usage"
  section of Rd files. Descriptions of S4 methods for "Methods" sections
  are dealt with by other functions.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="parse_pairlist.html">parse_pairlist</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">u</span> <span class="op">&lt;-</span> <span class="fu">get_usage</span><span class="op">(</span><span class="va">lm</span><span class="op">)</span>    <span class="co"># a long usage text</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">u</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> lm(formula, data, subset, weights, na.action, method = "qr", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    model = TRUE, x = FALSE, y = FALSE, qr = TRUE, singular.ok = TRUE, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    contrasts = NULL, offset, \dots)</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># if there are additional arguments in S3 methods,</span></span></span>
<span class="r-in"><span><span class="co"># use names of the functions, not the objects, e.g.</span></span></span>
<span class="r-in"><span><span class="fu">get_usage</span><span class="op">(</span><span class="st">"droplevels"</span>, S3class <span class="op">=</span> <span class="st">"data.frame"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                            droplevels </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "\\method{droplevels}{data.frame}(x, except = NULL, exclude, \\dots)" </span>
<span class="r-in"><span><span class="fu">get_usage</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"droplevels"</span>, S3class <span class="op">=</span> <span class="st">"data.frame"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                            droplevels </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "\\method{droplevels}{data.frame}(x, except = NULL, exclude, \\dots)" </span>
<span class="r-in"><span><span class="co"># (both give "\method{droplevels}{data.frame}(x, except = NULL, \dots)")</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># but this gives the args of the generic:  "\method{droplevels}{data.frame}(x, \dots)"</span></span></span>
<span class="r-in"><span><span class="fu">get_usage</span><span class="op">(</span><span class="va">droplevels</span>, S3class <span class="op">=</span> <span class="st">"data.frame"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                    droplevels </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "\\method{droplevels}{data.frame}(x, \\dots)" </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## a list containing some functions</span></span></span>
<span class="r-in"><span><span class="va">summaries</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>xbar <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, rho <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">x</span>,<span class="va">y</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">get_usage</span><span class="op">(</span><span class="va">summaries</span><span class="op">$</span><span class="va">xbar</span>, name <span class="op">=</span> <span class="st">"xbar"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      xbar </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "xbar(x)" </span>
<span class="r-in"><span><span class="fu">get_usage</span><span class="op">(</span><span class="va">summaries</span><span class="op">$</span><span class="va">rho</span>, name <span class="op">=</span> <span class="st">"rho"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         rho </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "rho(x, y)" </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## functions in an environment</span></span></span>
<span class="r-in"><span><span class="va">esummaries</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list2env.html" class="external-link">list2env</a></span><span class="op">(</span><span class="va">summaries</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">get_usage</span><span class="op">(</span><span class="va">esummaries</span><span class="op">$</span><span class="va">xbar</span>, name <span class="op">=</span> <span class="st">"xbar"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      xbar </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "xbar(x)" </span>
<span class="r-in"><span><span class="fu">get_usage</span><span class="op">(</span><span class="va">esummaries</span><span class="op">$</span><span class="va">rho</span>, name <span class="op">=</span> <span class="st">"rho"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         rho </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "rho(x, y)" </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Georgi N. Boshnakov.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

